---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
 * sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
  "vendor/breakpoint/breakpoint",

  "themes",
  "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
  "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

  "include/mixins",
  "vendor/susy/susy",

  "layout/reset",
  "layout/base",

  "include/utilities",
  "layout/tables",
  "layout/buttons",
  "layout/notices",
  "layout/masthead",
  "layout/navigation",
  "layout/footer",
  "syntax",

  "layout/forms",

  "layout/page",
  "layout/archive",
  "layout/sidebar",
  "layout/json_cv",

  "vendor/font-awesome/fontawesome",
  "vendor/font-awesome/solid",
  "vendor/font-awesome/brands"
;

/* =====================================================
   Fix: Navigation & Header Sticky Behavior
   ===================================================== */

.masthead {
  position: sticky !important;
  top: 0 !important;
  z-index: 9999 !important;
}

html {
  scroll-padding-top: 5rem;
}

/* =====================================================
   Fix: Sidebar & Footer Layout (Resolves Overlap/Scrollers)
   ===================================================== */

/* 1. Ensure the main container expands and cleans up layout */
#main {
  display: flex !important;
  flex-direction: row;
  align-items: stretch;
  min-height: 80vh; /* Pushes footer down on short pages like Resume */
  overflow: visible !important;
}

/* 2. Sidebar: Sticky but contained, removing middle scroller */
.sidebar {
  position: sticky !important;
  top: 5rem; /* Matches masthead height */
  align-self: flex-start;
  height: auto !important; 
  overflow: visible !important; /* Removes the internal scrollbar */
  z-index: 10;
  margin-bottom: 2rem;
}

/* 3. Main content area expansion */
.archive, .page {
  flex: 1;
  padding-top: 2.5rem !important;
}

/* 4. Footer Fix: High Z-Index and Clearing */
.page__footer {
  position: relative !important;
  clear: both !important;
  z-index: 20; /* Ensures footer sits above any sidebar 'bleed' */
  margin-top: 4rem !important; /* Visual gap */
  background-color: #333 !important; /* Matches dark theme */
}

/* 5. Mobile Responsiveness */
@media (max-width: 1024px) {
  #main {
    flex-direction: column;
  }
  .sidebar {
    position: relative !important;
    top: 0 !important;
    width: 100%;
  }
}
