---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
 * sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
  "vendor/breakpoint/breakpoint",

  "themes",
  "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
  "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

  "include/mixins",
  "vendor/susy/susy",

  "layout/reset",
  "layout/base",

  "include/utilities",
  "layout/tables",
  "layout/buttons",
  "layout/notices",
  "layout/masthead",
  "layout/navigation",
  "layout/footer",
  "syntax",

  "layout/forms",

  "layout/page",
  "layout/archive",
  "layout/sidebar",
  "layout/json_cv",

  "vendor/font-awesome/fontawesome",
  "vendor/font-awesome/solid",
  "vendor/font-awesome/brands"
;

/* =====================================================
   Fix: Top nav / "sitemap bar" covering page content
   ===================================================== */

/* 1) Make the header take up space (prevents overlap) */
.masthead {
  position: sticky !important;
  top: 0 !important;
  z-index: 9999 !important;
}

/* 2) Add a universal top offset for pages just in case */
body {
  padding-top: 0 !important; /* sticky masthead should remove need for padding */
}

/* 3) Extra safety for short pages where the first content sits too high */
.layout--single .page__inner-wrap,
.layout--single .page__content,
.initial-content,
.page__inner-wrap,
.page__content {
  padding-top: 2.5rem !important;
}

/* 4) Fix anchor jumps (if clicking links lands under the masthead) */
html {
  scroll-padding-top: 5rem;
}
/* =====================================================
   Fix: Sidebar overlapping the Footer
   ===================================================== */

/* 1. Ensure the main content wrapper expands to hold its children */
#main {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  margin-bottom: 2em; /* Spacing before footer starts */
}

/* 2. Constrain the sidebar so it doesn't "bleed" into the footer */
.sidebar {
  z-index: 10;
  margin-bottom: 2em;
  /* If the sidebar is sticky, this tells it where to stop */
  max-height: calc(100vh - 100px); 
  overflow-y: auto;
}

/* 3. Force the footer to stay at the bottom and clear the sidebar */
.page__footer {
  position: relative;
  clear: both;
  z-index: 20; /* Higher than sidebar */
  background: var(--background-color, #fff); /* Prevents transparency issues */
  width: 100%;
  margin-top: 3em;
  border-top: 1px solid rgba(0,0,0,0.1);
}

/* 4. Hide scrollbar on sidebar for a cleaner look while keeping fix #2 active */
.sidebar::-webkit-scrollbar {
  display: none;
}
.sidebar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
